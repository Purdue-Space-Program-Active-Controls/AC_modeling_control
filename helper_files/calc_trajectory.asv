function [traj, t] = calc_trajectory()

numPoints = 10;
endTime = 3;

xInitial = [0;0;0;0;pi/4;-pi/4];
xFinal = [10;10;10;0;0;0];
xWaypoints = [1 -1 2 6; 2 2 1 1; 3 3 3 2; 0 0 0 0; pi/8 pi/16 -pi/8 -pi/16; -pi/8 pi/16 0 0];

posInit = xInitial(1:3);
posFinal = xFinal(1:3);
posWaypoints = xWaypoints(1:3, :);

posTraj = [posInit, posWaypoints, posFinal];

posTrajNew = interparc(numPoints, posTraj(1, :), posTraj(2, :), posTraj(3, :), 'spline')';
X = posTrajNew(1, :);
Y = posTrajNew(2, :);
Z = posTrajNew(3, :);
t = linspace(0, endTime, numPoints);
VX = gradient(X, t);
VY = gradient(Y, t);
VZ = gradient(Z, t);

subplot(2, 2, 1);
plot3(posTraj(1, :), posTraj(2, :), posTraj(3, :), 'r.', X, Y, Z, 'b-');
subplot(2, 2, 2);
plot3(VX, VY, VZ, 'g-');

oriInit = xInitial(4:6);
oriFinal = xFinal(4:6);
oriWaypoints = xWaypoints(4:6, :);

oriTraj = [oriInit, oriWaypoints, oriFinal];

oriTrajNew = interparc(numPoints, oriTraj(1, :), oriTraj(2, :), oriTraj(3, :), 'spline')';
phi = oriTrajNew(1, :);
theta = oriTrajNew(2, :);
psi = oriTrajNew(3, :);
omega_phi = gradient(phi, t);
omega_theta = gradient(theta, t);
omega_psi = gradient(psi, t);

subplot(2, 2, 3);
plot3(oriTraj(1, :), oriTraj(2, :), oriTraj(3, :), 'r.', phi, theta, psi, 'b-');
subplot(2, 2, 4);
plot3(omega_phi, omega_theta, omega_psi, 'g-');

traj = [Z; X; Y; phi; theta; psi; VZ; VY; VZ; ]
end

